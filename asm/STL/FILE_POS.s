.include "macros.inc"

.section .text, "ax"
.global _ftell
_ftell:
/* 800B4990 000AF890  80 03 00 04 */	lwz r0, 4(r3)
/* 800B4994 000AF894  38 C0 00 00 */	li r6, 0
/* 800B4998 000AF898  54 04 57 7E */	rlwinm r4, r0, 0xa, 0x1d, 0x1f
/* 800B499C 000AF89C  38 04 00 FF */	addi r0, r4, 0xff
/* 800B49A0 000AF8A0  54 00 06 3E */	clrlwi r0, r0, 0x18
/* 800B49A4 000AF8A4  28 00 00 01 */	cmplwi r0, 1
/* 800B49A8 000AF8A8  41 81 00 10 */	bgt lbl_800B49B8
/* 800B49AC 000AF8AC  88 03 00 0A */	lbz r0, 0xa(r3)
/* 800B49B0 000AF8B0  2C 00 00 00 */	cmpwi r0, 0
/* 800B49B4 000AF8B4  41 82 00 14 */	beq lbl_800B49C8
lbl_800B49B8:
/* 800B49B8 000AF8B8  38 00 00 28 */	li r0, 0x28
/* 800B49BC 000AF8BC  38 60 FF FF */	li r3, -1
/* 800B49C0 000AF8C0  90 0D 99 E8 */	stw r0, errno-_SDA_BASE_(r13)
/* 800B49C4 000AF8C4  4E 80 00 20 */	blr 
lbl_800B49C8:
/* 800B49C8 000AF8C8  80 03 00 08 */	lwz r0, 8(r3)
/* 800B49CC 000AF8CC  54 05 1F 7F */	rlwinm. r5, r0, 3, 0x1d, 0x1f
/* 800B49D0 000AF8D0  40 82 00 0C */	bne lbl_800B49DC
/* 800B49D4 000AF8D4  80 63 00 18 */	lwz r3, 0x18(r3)
/* 800B49D8 000AF8D8  4E 80 00 20 */	blr 
lbl_800B49DC:
/* 800B49DC 000AF8DC  81 03 00 1C */	lwz r8, 0x1c(r3)
/* 800B49E0 000AF8E0  28 05 00 03 */	cmplwi r5, 3
/* 800B49E4 000AF8E4  80 83 00 24 */	lwz r4, 0x24(r3)
/* 800B49E8 000AF8E8  80 03 00 34 */	lwz r0, 0x34(r3)
/* 800B49EC 000AF8EC  7C 88 20 50 */	subf r4, r8, r4
/* 800B49F0 000AF8F0  7C E0 22 14 */	add r7, r0, r4
/* 800B49F4 000AF8F4  41 80 00 0C */	blt lbl_800B4A00
/* 800B49F8 000AF8F8  38 C5 FF FE */	addi r6, r5, -2
/* 800B49FC 000AF8FC  7C E6 38 50 */	subf r7, r6, r7
lbl_800B4A00:
/* 800B4A00 000AF900  80 03 00 04 */	lwz r0, 4(r3)
/* 800B4A04 000AF904  54 00 6F FF */	rlwinm. r0, r0, 0xd, 0x1f, 0x1f
/* 800B4A08 000AF908  40 82 00 28 */	bne lbl_800B4A30
/* 800B4A0C 000AF90C  7C 06 20 51 */	subf. r0, r6, r4
/* 800B4A10 000AF910  7C 09 03 A6 */	mtctr r0
/* 800B4A14 000AF914  41 82 00 1C */	beq lbl_800B4A30
lbl_800B4A18:
/* 800B4A18 000AF918  88 08 00 00 */	lbz r0, 0(r8)
/* 800B4A1C 000AF91C  39 08 00 01 */	addi r8, r8, 1
/* 800B4A20 000AF920  28 00 00 0A */	cmplwi r0, 0xa
/* 800B4A24 000AF924  40 82 00 08 */	bne lbl_800B4A2C
/* 800B4A28 000AF928  38 E7 00 01 */	addi r7, r7, 1
lbl_800B4A2C:
/* 800B4A2C 000AF92C  42 00 FF EC */	bdnz lbl_800B4A18
lbl_800B4A30:
/* 800B4A30 000AF930  7C E3 3B 78 */	mr r3, r7
/* 800B4A34 000AF934  4E 80 00 20 */	blr 

.global ftell
ftell:
/* 800B4A38 000AF938  4B FF FF 58 */	b _ftell

.global _fseek
_fseek:
/* 800B4A3C 000AF93C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800B4A40 000AF940  7C 08 02 A6 */	mflr r0
/* 800B4A44 000AF944  90 01 00 24 */	stw r0, 0x24(r1)
/* 800B4A48 000AF948  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800B4A4C 000AF94C  7C BF 2B 78 */	mr r31, r5
/* 800B4A50 000AF950  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800B4A54 000AF954  7C 7E 1B 78 */	mr r30, r3
/* 800B4A58 000AF958  90 81 00 08 */	stw r4, 8(r1)
/* 800B4A5C 000AF95C  80 03 00 04 */	lwz r0, 4(r3)
/* 800B4A60 000AF960  54 00 57 7E */	rlwinm r0, r0, 0xa, 0x1d, 0x1f
/* 800B4A64 000AF964  28 00 00 01 */	cmplwi r0, 1
/* 800B4A68 000AF968  40 82 00 10 */	bne lbl_800B4A78
/* 800B4A6C 000AF96C  88 03 00 0A */	lbz r0, 0xa(r3)
/* 800B4A70 000AF970  2C 00 00 00 */	cmpwi r0, 0
/* 800B4A74 000AF974  41 82 00 14 */	beq lbl_800B4A88
lbl_800B4A78:
/* 800B4A78 000AF978  38 00 00 28 */	li r0, 0x28
/* 800B4A7C 000AF97C  38 60 FF FF */	li r3, -1
/* 800B4A80 000AF980  90 0D 99 E8 */	stw r0, errno-_SDA_BASE_(r13)
/* 800B4A84 000AF984  48 00 01 64 */	b lbl_800B4BE8
lbl_800B4A88:
/* 800B4A88 000AF988  80 03 00 08 */	lwz r0, 8(r3)
/* 800B4A8C 000AF98C  54 00 1F 7E */	srwi r0, r0, 0x1d
/* 800B4A90 000AF990  28 00 00 01 */	cmplwi r0, 1
/* 800B4A94 000AF994  40 82 00 34 */	bne lbl_800B4AC8
/* 800B4A98 000AF998  38 80 00 00 */	li r4, 0
/* 800B4A9C 000AF99C  4B FF F9 45 */	bl __flush_buffer
/* 800B4AA0 000AF9A0  2C 03 00 00 */	cmpwi r3, 0
/* 800B4AA4 000AF9A4  41 82 00 24 */	beq lbl_800B4AC8
/* 800B4AA8 000AF9A8  38 00 00 01 */	li r0, 1
/* 800B4AAC 000AF9AC  38 80 00 00 */	li r4, 0
/* 800B4AB0 000AF9B0  98 1E 00 0A */	stb r0, 0xa(r30)
/* 800B4AB4 000AF9B4  38 00 00 28 */	li r0, 0x28
/* 800B4AB8 000AF9B8  38 60 FF FF */	li r3, -1
/* 800B4ABC 000AF9BC  90 9E 00 28 */	stw r4, 0x28(r30)
/* 800B4AC0 000AF9C0  90 0D 99 E8 */	stw r0, errno-_SDA_BASE_(r13)
/* 800B4AC4 000AF9C4  48 00 01 24 */	b lbl_800B4BE8
lbl_800B4AC8:
/* 800B4AC8 000AF9C8  2C 1F 00 01 */	cmpwi r31, 1
/* 800B4ACC 000AF9CC  40 82 00 1C */	bne lbl_800B4AE8
/* 800B4AD0 000AF9D0  7F C3 F3 78 */	mr r3, r30
/* 800B4AD4 000AF9D4  3B E0 00 00 */	li r31, 0
/* 800B4AD8 000AF9D8  4B FF FE B9 */	bl _ftell
/* 800B4ADC 000AF9DC  80 01 00 08 */	lwz r0, 8(r1)
/* 800B4AE0 000AF9E0  7C 00 1A 14 */	add r0, r0, r3
/* 800B4AE4 000AF9E4  90 01 00 08 */	stw r0, 8(r1)
lbl_800B4AE8:
/* 800B4AE8 000AF9E8  2C 1F 00 02 */	cmpwi r31, 2
/* 800B4AEC 000AF9EC  41 82 00 80 */	beq lbl_800B4B6C
/* 800B4AF0 000AF9F0  80 1E 00 04 */	lwz r0, 4(r30)
/* 800B4AF4 000AF9F4  54 00 2F 7E */	rlwinm r0, r0, 5, 0x1d, 0x1f
/* 800B4AF8 000AF9F8  28 00 00 03 */	cmplwi r0, 3
/* 800B4AFC 000AF9FC  41 82 00 70 */	beq lbl_800B4B6C
/* 800B4B00 000AFA00  80 DE 00 08 */	lwz r6, 8(r30)
/* 800B4B04 000AFA04  54 C3 1F 7E */	srwi r3, r6, 0x1d
/* 800B4B08 000AFA08  38 03 FF FE */	addi r0, r3, -2
/* 800B4B0C 000AFA0C  28 00 00 01 */	cmplwi r0, 1
/* 800B4B10 000AFA10  41 81 00 5C */	bgt lbl_800B4B6C
/* 800B4B14 000AFA14  80 61 00 08 */	lwz r3, 8(r1)
/* 800B4B18 000AFA18  80 BE 00 18 */	lwz r5, 0x18(r30)
/* 800B4B1C 000AFA1C  7C 03 28 40 */	cmplw r3, r5
/* 800B4B20 000AFA20  40 80 00 10 */	bge lbl_800B4B30
/* 800B4B24 000AFA24  80 1E 00 34 */	lwz r0, 0x34(r30)
/* 800B4B28 000AFA28  7C 03 00 40 */	cmplw r3, r0
/* 800B4B2C 000AFA2C  40 80 00 14 */	bge lbl_800B4B40
lbl_800B4B30:
/* 800B4B30 000AFA30  80 1E 00 08 */	lwz r0, 8(r30)
/* 800B4B34 000AFA34  54 00 00 FE */	clrlwi r0, r0, 3
/* 800B4B38 000AFA38  90 1E 00 08 */	stw r0, 8(r30)
/* 800B4B3C 000AFA3C  48 00 00 3C */	b lbl_800B4B78
lbl_800B4B40:
/* 800B4B40 000AFA40  80 9E 00 1C */	lwz r4, 0x1c(r30)
/* 800B4B44 000AFA44  7C 60 18 50 */	subf r3, r0, r3
/* 800B4B48 000AFA48  38 00 00 02 */	li r0, 2
/* 800B4B4C 000AFA4C  7C 64 1A 14 */	add r3, r4, r3
/* 800B4B50 000AFA50  90 7E 00 24 */	stw r3, 0x24(r30)
/* 800B4B54 000AFA54  50 06 E8 04 */	rlwimi r6, r0, 0x1d, 0, 2
/* 800B4B58 000AFA58  80 01 00 08 */	lwz r0, 8(r1)
/* 800B4B5C 000AFA5C  7C 00 28 50 */	subf r0, r0, r5
/* 800B4B60 000AFA60  90 DE 00 08 */	stw r6, 8(r30)
/* 800B4B64 000AFA64  90 1E 00 28 */	stw r0, 0x28(r30)
/* 800B4B68 000AFA68  48 00 00 10 */	b lbl_800B4B78
lbl_800B4B6C:
/* 800B4B6C 000AFA6C  80 1E 00 08 */	lwz r0, 8(r30)
/* 800B4B70 000AFA70  54 00 00 FE */	clrlwi r0, r0, 3
/* 800B4B74 000AFA74  90 1E 00 08 */	stw r0, 8(r30)
lbl_800B4B78:
/* 800B4B78 000AFA78  80 1E 00 08 */	lwz r0, 8(r30)
/* 800B4B7C 000AFA7C  54 00 1F 7F */	rlwinm. r0, r0, 3, 0x1d, 0x1f
/* 800B4B80 000AFA80  40 82 00 64 */	bne lbl_800B4BE4
/* 800B4B84 000AFA84  81 9E 00 38 */	lwz r12, 0x38(r30)
/* 800B4B88 000AFA88  2C 0C 00 00 */	cmpwi r12, 0
/* 800B4B8C 000AFA8C  41 82 00 44 */	beq lbl_800B4BD0
/* 800B4B90 000AFA90  7F E5 FB 78 */	mr r5, r31
/* 800B4B94 000AFA94  38 81 00 08 */	addi r4, r1, 8
/* 800B4B98 000AFA98  80 7E 00 00 */	lwz r3, 0(r30)
/* 800B4B9C 000AFA9C  80 DE 00 48 */	lwz r6, 0x48(r30)
/* 800B4BA0 000AFAA0  7D 89 03 A6 */	mtctr r12
/* 800B4BA4 000AFAA4  4E 80 04 21 */	bctrl 
/* 800B4BA8 000AFAA8  2C 03 00 00 */	cmpwi r3, 0
/* 800B4BAC 000AFAAC  41 82 00 24 */	beq lbl_800B4BD0
/* 800B4BB0 000AFAB0  38 00 00 01 */	li r0, 1
/* 800B4BB4 000AFAB4  38 80 00 00 */	li r4, 0
/* 800B4BB8 000AFAB8  98 1E 00 0A */	stb r0, 0xa(r30)
/* 800B4BBC 000AFABC  38 00 00 28 */	li r0, 0x28
/* 800B4BC0 000AFAC0  38 60 FF FF */	li r3, -1
/* 800B4BC4 000AFAC4  90 9E 00 28 */	stw r4, 0x28(r30)
/* 800B4BC8 000AFAC8  90 0D 99 E8 */	stw r0, errno-_SDA_BASE_(r13)
/* 800B4BCC 000AFACC  48 00 00 1C */	b lbl_800B4BE8
lbl_800B4BD0:
/* 800B4BD0 000AFAD0  38 60 00 00 */	li r3, 0
/* 800B4BD4 000AFAD4  98 7E 00 09 */	stb r3, 9(r30)
/* 800B4BD8 000AFAD8  80 01 00 08 */	lwz r0, 8(r1)
/* 800B4BDC 000AFADC  90 1E 00 18 */	stw r0, 0x18(r30)
/* 800B4BE0 000AFAE0  90 7E 00 28 */	stw r3, 0x28(r30)
lbl_800B4BE4:
/* 800B4BE4 000AFAE4  38 60 00 00 */	li r3, 0
lbl_800B4BE8:
/* 800B4BE8 000AFAE8  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800B4BEC 000AFAEC  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800B4BF0 000AFAF0  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800B4BF4 000AFAF4  7C 08 03 A6 */	mtlr r0
/* 800B4BF8 000AFAF8  38 21 00 20 */	addi r1, r1, 0x20
/* 800B4BFC 000AFAFC  4E 80 00 20 */	blr 
